<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        #numeroContainer {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: 5px solid #8B0000; /* Rojo oscuro */
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px;
        }
        #numero {
            font-size: 6em;
            font-weight: bold;
            color: #2c3e50;
        }
        #historial {
            margin-top: 10px;
            font-size: 1.2em;
        }
        #numerosContainer, #ultimosNumerosContainer {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            max-width: 500px;
            margin: 0 auto;
            padding: 10px;
        }
        #ultimosNumerosContainer {
            grid-template-columns: repeat(5, 1fr);
            margin-top: 10px;
        }
        .numeroCirculo {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #05102e;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.0em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .numeroCirculo.marcado {
            background-color: #e74c3c;
        }
        .ultimoNumeroCirculo {
            background-color: #e74c3c;
            font-size: 1.2em;
        }
        button {
            padding: 10px 20px;
            font-size: 1em;
            margin-top: 10px;
            cursor: pointer;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            min-width: 150px;
        }
        button:hover {
            background-color: #2980b9;
        }
        #ultimosNumeros {
            margin-top: 35px;
            font-size: 1.0em;
            color: #2c3e50;
        }
        #ultimosNumeros p {
            font-size: 1.0em;
            margin: 5px 0;
        }
        #verificarNumeroContainer {
            margin-top: 20px;
        }
        #verificarNumeroContainer input {
            padding: 12px;
            font-size: 1.2em;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 120px;
        }
        #verificarNumeroContainer button {
            padding: 12px 24px;
            font-size: 1.2em;
            margin-left: 10px;
            background-color: #170202;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #verificarNumeroContainer button:hover {
            background-color: #114007;
        }
        #mensajeVerificacion {
            margin-top: 30px;
            font-size: 1.0em;
            color: #2c3e50;
        }
        #estadoJuego {
            margin-top: 15px;
            font-size: 1.0em;
            font-weight: bold;
            color: #8B0000;
            display: none;
        }
        #estadoJuego.enMarcha {
            color: #2ecc71;
        }
        #estadoJuego.pausado {
            color: #e74c3c;
        }
        #botonesContainer {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        #cartonesContainer {
            display: none; /* Ocultar el banco de datos de cartones */
        }
        #verificarCartonContainer {
            margin-top: 20px;
        }
        #verificarCartonContainer input {
            padding: 12px;
            font-size: 1.2em;
            border: 1px solid #ccc;
            border-radius: 5px;
            width: 120px;
        }
        #verificarCartonContainer button {
            padding: 12px 24px;
            font-size: 1.2em;
            margin-left: 10px;
            background-color: #170202;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #verificarCartonContainer button:hover {
            background-color: #114007;
        }
        #mensajeVerificacionCarton {
            margin-top: 30px;
            font-size: 1.0em;
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <!-- Contenedor del número actual -->
    <div id="numeroContainer">
        <div id="numero">--</div>
    </div>

    <!-- Botones de control -->
    <div id="botonesContainer">
        <button id="reiniciarBtn" onclick="reiniciarJuego()">Reiniciar Juego</button>
        <button id="startStopBtn" onclick="startStop()">Comenzar</button>
    </div>

    <!-- Historial de números -->
    <div id="historial">
        <div id="numerosContainer"></div>
    </div>

    <!-- Últimos 5 números -->
    <div id="ultimosNumeros">
        <p>Últimos 5 números:</p>
        <div id="ultimosNumerosContainer"></div>
        <div id="estadoJuego"></div>
    </div>

    <!-- Verificar número -->
    <div id="verificarNumeroContainer">
        <input type="number" id="numeroVerificar" placeholder="Número" min="1" max="90">
        <button onclick="verificarNumero()">Verificar</button>
        <div id="mensajeVerificacion"></div>
    </div>

    <!-- Verificar cartón -->
    <div id="verificarCartonContainer">
        <input type="number" id="cartonVerificar" placeholder="Cartón" min="1">
        <button onclick="verificarCarton()">Verificar</button>
        <div id="mensajeVerificacionCarton"></div>
    </div>

    <!-- Banco de datos de cartones (oculto) -->
    <div id="cartonesContainer">
        <!-- Ejemplo de cartón 44 -->
        <div id="carton44" data-numeros="5,12,23,34,45,56,67,78,89,1,11,22,33,44,55"></div>
        <!-- Agrega más cartones según sea necesario -->
    </div>

    <script>
        let numerosSalidos = [];
        let numerosDisponibles = Array.from({length: 90}, (_, i) => i + 1);
        let intervalo;
        let enEjecucion = false;
        let juegoPausado = false;

        // Generar los círculos de números
        const numerosContainer = document.getElementById('numerosContainer');
        for (let i = 1; i <= 90; i++) {
            const circulo = document.createElement('div');
            circulo.classList.add('numeroCirculo');
            circulo.textContent = i;
            circulo.id = `numero${i}`;
            numerosContainer.appendChild(circulo);
        }

        // Función para iniciar/detener el juego
        function startStop() {
            if (enEjecucion) {
                clearInterval(intervalo);
                document.getElementById('startStopBtn').textContent = 'Comenzar';
                enEjecucion = false;
                actualizarEstadoJuego("pausado");
            } else {
                // Reproducir la palabra "Empezamos"
                if (window.speechSynthesis) {
                    const mensaje = new SpeechSynthesisUtterance("Empezamos");
                    mensaje.lang = 'es-ES';
                    window.speechSynthesis.speak(mensaje);
                }

                // Iniciar el juego después de un breve retraso
                setTimeout(() => {
                    intervalo = setInterval(siguienteNumero, 3000);
                    document.getElementById('startStopBtn').textContent = 'Detener';
                    enEjecucion = true;
                    actualizarEstadoJuego("enMarcha");
                    limpiarMensajeVerificacion();
                }, 1000); // Esperar 1 segundo antes de comenzar
            }
        }

        // Función para generar el siguiente número
        function siguienteNumero() {
            if (numerosDisponibles.length === 0) {
                alert("¡Todos los números han sido llamados!");
                clearInterval(intervalo);
                document.getElementById('startStopBtn').textContent = 'Comenzar';
                enEjecucion = false;
                actualizarEstadoJuego("pausado");
                return;
            }

            const indice = Math.floor(Math.random() * numerosDisponibles.length);
            const numero = numerosDisponibles.splice(indice, 1)[0];
            numerosSalidos.push(numero);

            document.getElementById('numero').textContent = numero;
            marcarNumero(numero);

            actualizarUltimosNumeros();
            anunciarNumero(numero);

            // Verificar automáticamente si el cartón 44 tiene bingo
            verificarCarton44();
        }

        // Función para anunciar el número
        function anunciarNumero(numero) {
            if (window.speechSynthesis) {
                const mensaje = new SpeechSynthesisUtterance(numero.toString());
                mensaje.lang = 'es-ES';
                window.speechSynthesis.cancel();
                window.speechSynthesis.speak(mensaje);
            }
        }

        // Función para marcar un número como salido
        function marcarNumero(numero) {
            const circulo = document.getElementById(`numero${numero}`);
            if (circulo) {
                circulo.classList.add('marcado');
            }
        }

        // Función para reiniciar el juego
        function reiniciarJuego() {
            numerosSalidos = [];
            numerosDisponibles = Array.from({length: 90}, (_, i) => i + 1);
            document.getElementById('numero').textContent = '--';
            const circulos = document.querySelectorAll('.numeroCirculo');
            circulos.forEach(circulo => {
                circulo.classList.remove('marcado');
            });
            clearInterval(intervalo);
            document.getElementById('startStopBtn').textContent = 'Comenzar';
            enEjecucion = false;
            juegoPausado = false;
            actualizarUltimosNumeros();
            limpiarMensajeVerificacion();
            actualizarEstadoJuego("pausado");
        }

        // Función para actualizar los últimos 5 números
        function actualizarUltimosNumeros() {
            const ultimos5 = numerosSalidos.slice(-5);
            const ultimosNumerosContainer = document.getElementById('ultimosNumerosContainer');
            ultimosNumerosContainer.innerHTML = '';

            ultimos5.forEach(numero => {
                const circulo = document.createElement('div');
                circulo.classList.add('numeroCirculo', 'ultimoNumeroCirculo');
                circulo.textContent = numero;
                ultimosNumerosContainer.appendChild(circulo);
            });
        }

        // Función para verificar un número
        function verificarNumero() {
            const numero = parseInt(document.getElementById('numeroVerificar').value);
            const mensajeVerificacion = document.getElementById('mensajeVerificacion');

            if (isNaN(numero) || numero < 1 || numero > 90) {
                mensajeVerificacion.textContent = "Por favor, ingresa un número válido (1-90).";
                mensajeVerificacion.style.color = "red";
                return;
            }

            if (numerosSalidos.includes(numero)) {
                mensajeVerificacion.textContent = `✅ El número ${numero} ha salido.`;
                mensajeVerificacion.style.color = "green";
                marcarNumero(numero);
            } else {
                mensajeVerificacion.textContent = `❌ El número ${numero} no ha salido.`;
                mensajeVerificacion.style.color = "red";
            }

            document.getElementById('numeroVerificar').value = "";
            document.getElementById('numeroVerificar').focus();
        }

        // Función para limpiar el mensaje de verificación
        function limpiarMensajeVerificacion() {
            const mensajeVerificacion = document.getElementById('mensajeVerificacion');
            mensajeVerificacion.textContent = '';
        }

        // Función para actualizar el estado del juego
        function actualizarEstadoJuego(estado) {
            const estadoJuego = document.getElementById('estadoJuego');
            estadoJuego.style.display = 'block';
            estadoJuego.textContent = estado === "enMarcha" ? "Juego en marcha" : "Juego pausado";
            estadoJuego.className = estado === "enMarcha" ? "enMarcha" : "pausado";
        }

        // Función para verificar automáticamente el cartón 44
        function verificarCarton44() {
            const carton44 = document.getElementById('carton44');
            const numerosCarton44 = carton44.getAttribute('data-numeros').split(',').map(Number);
            const numerosFaltantes = numerosCarton44.filter(num => !numerosSalidos.includes(num));

            if (numerosFaltantes.length === 0) {
                const mensajeVerificacionCarton = document.getElementById('mensajeVerificacionCarton');
                mensajeVerificacionCarton.textContent = `✅ ¡Bingo! El cartón 44 ha completado todos sus números.`;
                mensajeVerificacionCarton.style.color = "green";

                // Anunciar "Bingo. El cartón 44 tiene bingo"
                if (window.speechSynthesis) {
                    const mensaje = new SpeechSynthesisUtterance("Bingo. El cartón 44 tiene bingo");
                    mensaje.lang = 'es-ES';
                    window.speechSynthesis.speak(mensaje);
                }

                // Detener el juego
                clearInterval(intervalo);
                document.getElementById('startStopBtn').textContent = 'Comenzar';
                enEjecucion = false;
                actualizarEstadoJuego("pausado");
            }
        }

        // Función para verificar un cartón
        function verificarCarton() {
            const numeroCarton = parseInt(document.getElementById('cartonVerificar').value);
            const carton = document.getElementById(`carton${numeroCarton}`);
            const mensajeVerificacionCarton = document.getElementById('mensajeVerificacionCarton');

            if (!carton) {
                mensajeVerificacionCarton.textContent = "❌ Cartón no encontrado.";
                mensajeVerificacionCarton.style.color = "red";
                document.getElementById('cartonVerificar').focus(); // Mantener el foco
                return;
            }

            const numerosCarton = carton.getAttribute('data-numeros').split(',').map(Number);
            const numerosFaltantes = numerosCarton.filter(num => !numerosSalidos.includes(num));

            if (numerosFaltantes.length === 0) {
                mensajeVerificacionCarton.textContent = `✅ ¡Bingo! Todos los números del cartón ${numeroCarton} han salido.`;
                mensajeVerificacionCarton.style.color = "green";

                // Anunciar "Bingo. El cartón (número) tiene bingo"
                if (window.speechSynthesis) {
                    const mensaje = new SpeechSynthesisUtterance(`Bingo. El cartón número ${numeroCarton} tiene bingo`);
                    mensaje.lang = 'es-ES';
                    window.speechSynthesis.speak(mensaje);
                }
            } else {
                mensajeVerificacionCarton.textContent = `❌ En el cartón ${numeroCarton} faltan los números: ${numerosFaltantes.join(', ')}.`;
                mensajeVerificacionCarton.style.color = "red";
            }

            document.getElementById('cartonVerificar').value = "";
            document.getElementById('cartonVerificar').focus(); // Mantener el foco
        }

        // Añadir evento blur al campo de verificación de cartón
        document.getElementById('cartonVerificar').addEventListener('blur', () => {
            document.getElementById('mensajeVerificacionCarton').textContent = ""; // Limpiar mensaje
        });

        // Añadir eventos para pausar/reanudar con inputs
        document.getElementById('numeroVerificar').addEventListener('focus', () => {
            if (enEjecucion) {
                clearInterval(intervalo);
                juegoPausado = true;
                document.getElementById('startStopBtn').textContent = 'Comenzar';
                enEjecucion = false;
                actualizarEstadoJuego("pausado");
            }
        });

        document.getElementById('cartonVerificar').addEventListener('focus', () => {
            if (enEjecucion) {
                clearInterval(intervalo);
                juegoPausado = true;
                document.getElementById('startStopBtn').textContent = 'Comenzar';
                enEjecucion = false;
                actualizarEstadoJuego("pausado");
            }
        });

        document.getElementById('numeroVerificar').addEventListener('blur', () => {
            if (juegoPausado) {
                intervalo = setInterval(siguienteNumero, 3000);
                enEjecucion = true;
                juegoPausado = false;
                document.getElementById('startStopBtn').textContent = 'Detener';
                actualizarEstadoJuego("enMarcha");
            }
            // Limpiar el mensaje de verificación al perder el foco
            document.getElementById('mensajeVerificacion').textContent = "";
        });

        document.getElementById('cartonVerificar').addEventListener('blur', () => {
            if (juegoPausado) {
                intervalo = setInterval(siguienteNumero, 3000);
                enEjecucion = true;
                juegoPausado = false;
                document.getElementById('startStopBtn').textContent = 'Detener';
                actualizarEstadoJuego("enMarcha");
            }
        });
    </script>
</body>
</html>
