<!DOCTYPE html>
<html lang="es">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>� BINGO</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20100%20100%22%3E%0A%20%20%3Cdefs%3E%0A%20%20%20%20%3CradialGradient%20id%3D%22grad%22%20cx%3D%2230%25%22%20cy%3D%2230%25%22%3E%0A%20%20%20%20%20%20%3Cstop%20offset%3D%220%25%22%20stop-color%3D%22%23fff%22/%3E%0A%20%20%20%20%20%20%3Cstop%20offset%3D%22100%25%22%20stop-color%3D%22%23b8d4e3%22/%3E%0A%20%20%20%20%3C/radialGradient%3E%0A%20%20%3C/defs%3E%0A%20%20%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2245%22%20fill%3D%22url%28%23grad%29%22%20stroke%3D%22%234a90e2%22%20stroke-width%3D%223%22/%3E%0A%20%20%3Ctext%20x%3D%2250%22%20y%3D%2235%22%20text-anchor%3D%22middle%22%20font-family%3D%22Arial%2Csans-serif%22%20font-size%3D%2218%22%20font-weight%3D%22bold%22%20fill%3D%22%232c5282%22%3EBINGO%3C/text%3E%0A%20%20%3Ccircle%20cx%3D%2230%22%20cy%3D%2265%22%20r%3D%223%22%20fill%3D%22%234a90e2%22/%3E%0A%20%20%3Ccircle%20cx%3D%2270%22%20cy%3D%2270%22%20r%3D%222%22%20fill%3D%22%234a90e2%22/%3E%0A%3C/svg%3E">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        // Night mode toggle function - defined early to be accessible
        function toggleNightMode() {
            const body = document.body;
            const btn = document.getElementById('nightModeToggle');
            
            if (body.classList.contains('night-mode')) {
                body.classList.remove('night-mode');
                localStorage.setItem('nightMode', 'false');
                if (btn) {
                    btn.setAttribute('aria-pressed', 'false');
                    btn.innerHTML = '&#127769;';
                    btn.style.background = '#0e324b';
                    btn.style.borderColor = '#a51818';
                }
            } else {
                body.classList.add('night-mode');
                localStorage.setItem('nightMode', 'true');
                if (btn) {
                    btn.setAttribute('aria-pressed', 'true');
                    btn.innerHTML = '&#9728;';
                    btn.style.background = '#f39c12';
                    btn.style.borderColor = '#e74c3c';
                }
            }
        }
        
        // Check saved preference on load
        document.addEventListener('DOMContentLoaded', function() {
            if (localStorage.getItem('nightMode') === 'true') {
                toggleNightMode();
            }
        });
    </script>
</head>
<body>
    <header class="topbar">
        <a class="brand-badge" href="https://boris8800.github.io/Bingo/">
            <img src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20100%20100%22%3E%0A%20%20%3Cdefs%3E%0A%20%20%20%20%3CradialGradient%20id%3D%22grad%22%20cx%3D%2230%25%22%20cy%3D%2230%25%22%3E%0A%20%20%20%20%20%20%3Cstop%20offset%3D%220%25%22%20stop-color%3D%22%23fff%22/%3E%0A%20%20%20%20%20%20%3Cstop%20offset%3D%22100%25%22%20stop-color%3D%22%23b8d4e3%22/%3E%0A%20%20%20%20%3C/radialGradient%3E%0A%20%20%3C/defs%3E%0A%20%20%3Ccircle%20cx%3D%2250%22%20cy%3D%2250%22%20r%3D%2245%22%20fill%3D%22url%28%23grad%29%22%20stroke%3D%22%234a90e2%22%20stroke-width%3D%223%22/%3E%0A%20%20%3Ctext%20x%3D%2250%22%20y%3D%2235%22%20text-anchor%3D%22middle%22%20font-family%3D%22Arial%2Csans-serif%22%20font-size%3D%2218%22%20font-weight%3D%22bold%22%20fill%3D%22%232c5282%22%3EBINGO%3C/text%3E%0A%20%20%3Ccircle%20cx%3D%2230%22%20cy%3D%2265%22%20r%3D%223%22%20fill%3D%22%234a90e2%22/%3E%0A%20%20%3Ccircle%20cx%3D%2270%22%20cy%3D%2270%22%20r%3D%222%22%20fill%3D%22%234a90e2%22/%3E%0A%3C/svg%3E" width="32" height="32" alt="Logo">
        </a>
        <button id="nightModeToggle" class="icon-btn" onclick="toggleNightMode()" aria-label="Cambiar modo noche" aria-pressed="false">&#127769;</button>
        <button id="helpBtn" class="icon-btn" onclick="openHelpModal()" aria-label="Abrir ayuda" title="Ayuda">Ayuda</button>
    </header>

    <div id="voiceSettingsContainer" class="control-box">
        <label for="voiceSelect">Seleccionar Voz:</label>
        <select id="voiceSelect" aria-label="Seleccionar voz"></select>
    </div>

<div id="numeroContainer">
<div id="numero" role="status" aria-live="polite" aria-atomic="true">--</div>
</div>

<div id="botonesContainer">
<button id="reiniciarBtn" onclick="reiniciarJuego()">Reiniciar Juego</button>
<button id="startStopBtn" onclick="startStop()">Empezar</button>
</div>

<div id="speedControl" class="control-box">
    <label for="speedSlider">Velocidad: <strong id="speedValue">3.5s</strong></label>
    <input id="speedSlider" type="range" min="1500" max="7000" step="500" value="3500" aria-label="Velocidad de sorteo en milisegundos" />
</div>
<div id="historial">
<div id="numerosContainer"></div>
</div>
<div id="ultimosNumeros">
<p>Últimos 10 números:</p>
<div id="ultimosNumerosContainer"></div>
<div id="estadoJuego"></div>
</div>
<div id="verificarNumeroContainer" class="control-box">
<input id="numeroVerificar" max="90" min="1" placeholder="Número" type="number"/>
<button onclick="verificarNumero()">Verificar</button>
<div id="mensajeVerificacion"></div>
</div>
<div id="verificarCartonContainer" class="control-box">
<input id="cartonVerificar" min="1" placeholder="Cartón" type="number"/>
<button onclick="verificarCarton()">Verificar</button>
<div id="mensajeVerificacionCarton"></div>
</div>

<div id="myCardsTrackerContainer" class="control-box">
    <h3>Seguir Cartones</h3>
    <label for="myCardNumbersInput">Números de cartón (ej: 7, 15, 23):</label>
    <input type="text" id="myCardNumbersInput" placeholder="Números separados por coma">
    <button onclick="trackMyCards()">Añadir</button>
    <span id="trackerMsg" style="margin-left: 10px; font-weight: bold;"></span>
    <h4>Cartones con Bingo:</h4>
    <div id="myTrackedBingosList" class="bingo-list-display">---</div>
    <div id="myTrackedCardPreview" style="margin-top: 15px;"></div>
    
    <!-- Alerta de Bingo y botón Continuar -->
    <div id="bingoPauseContainer" style="display: none; margin-top: 15px; padding: 15px; background: rgba(255, 193, 7, 0.1); border: 2px solid #ffc107; border-radius: 12px; text-align: center;">
        <h4 style="color: #d39e00; margin-bottom: 10px;">¡JUEGO EN PAUSA!</h4>
        <p style="font-size: 0.9rem; margin-bottom: 15px;">Se ha detectado un Bingo en tus cartones.</p>
        <button onclick="resumeBingoPause()" style="background: #28a745; color: white; border: none; padding: 10px; border-radius: 8px; width: 100%; cursor: pointer;">Continuar</button>
    </div>
</div>


    
<div id="cartonesBingoContainer" class="control-box">
<h3>Cartones con Bingo:</h3>
<div id="listaCartonesBingo">Ningún cartón tiene bingo todavía</div>
</div>


    


<div id="cartonesContainer">
<div data-numeros="41, 73, 53, 24, 1, 61, 35, 27, 10, 4, 62, 67, 46, 29, 16" id="carton16"></div>
<div data-numeros="9, 18, 36, 61, 77, 13, 24, 46, 65, 90, 28, 32, 50, 75, 89" id="carton42"></div>
<div data-numeros="13, 41, 52, 80, 5, 58, 64, 76, 30, 19, 32, 47, 25, 73, 86" id="carton30"></div>
<div data-numeros="6, 27, 56, 43, 69, 15, 30, 58, 75, 82, 2, 29, 47, 64, 90" id="carton22"></div>
<div data-numeros="12, 40, 61, 76, 89, 55, 86, 5, 23, 39, 16, 25, 43, 67, 78" id="carton35"></div>
<div data-numeros="14, 36, 48, 50, 61, 38, 17, 54, 72, 83, 68, 79, 46, 22, 5" id="carton19"></div>
<div data-numeros="18, 36, 55, 60, 87, 15, 40, 59, 72, 20, 49, 64, 79, 9, 3" id="carton14"></div>
<div data-numeros="16, 27, 40, 76, 90, 79, 56, 32, 11, 9, 2, 22, 80, 47, 58" id="carton48"></div>
<div data-numeros="8, 21, 42, 63, 75, 14, 26, 33, 50, 80, 38, 47, 56, 68, 84" id="carton13"></div>
<div data-numeros="4, 22, 43, 71, 84, 10, 31, 47, 63, 79, 25, 32, 51, 66, 8" id="carton12"></div>
<div data-numeros="19, 33, 46, 64, 78, 39, 52, 69, 82, 7, 12, 24, 42, 59, 71" id="carton47"></div>
<div data-numeros="85, 8, 4, 34, 53, 67, 10, 41, 55, 72, 89, 23, 38, 45, 61" id="carton43"></div>
<div data-numeros="12, 29, 33, 42, 76, 20, 48, 59, 63, 1, 7, 17, 51, 70, 83" id="carton40"></div>
<div data-numeros="78, 45, 67, 20, 9, 85, 73, 51, 34, 11, 74, 57, 39, 25, 4" id="carton23"></div>
<div data-numeros="3, 25, 36, 74, 84, 6, 18, 28, 65, 77, 20, 30, 44, 60, 88" id="carton46"></div>
<div data-numeros="11, 8, 35, 49, 77, 80, 29, 52, 65, 74, 79, 33, 41, 58, 79" id="carton33"></div>
<div data-numeros="9, 11, 20, 34, 55, 81, 2, 16, 24, 41, 62, 30, 45, 68, 74" id="carton8"></div>
<div data-numeros="1, 14, 17, 43, 57, 81, 87, 31, 50, 62, 73, 21, 37, 48, 66" id="carton45"></div>
<div data-numeros="21, 45, 60, 82, 1, 28, 32, 51, 87, 7, 64, 71, 85, 14, 38" id="carton31"></div>
<div data-numeros="26, 41, 4, 73, 80, 15, 21, 55, 60, 84, 34, 8, 49, 56, 68" id="carton41"></div>
<div data-numeros="7, 12, 39, 52, 66, 83, 31, 57, 74, 90, 69, 77, 5, 28, 45" id="carton15"></div>
<div data-numeros="2, 13, 48, 62, 81, 17, 30, 43, 70, 86, 22, 34, 54, 76, 88" id="carton17"></div>
<div data-numeros="1, 13, 21, 42, 60, 90, 18, 29, 48, 54, 71, 30, 56, 65, 79" id="carton4"></div>
<div data-numeros="8, 9, 14, 28, 43, 61, 82, 31, 50, 63, 77, 10, 37, 72, 84" id="carton3"></div>
<div data-numeros="15, 7, 34, 45, 75, 70, 81, 68, 49, 27, 89, 53, 66, 21, 6" id="carton28"></div>
<div data-numeros="15, 29, 49, 68, 75, 13, 35, 51, 70, 83, 26, 54, 63, 86, 5" id="carton44"></div>
<div data-numeros="15, 24, 40, 58, 73, 27, 45, 67, 76, 89, 38, 52, 69, 80, 6" id="carton5"></div>
<div data-numeros="38, 52, 2, 69, 79, 87, 71, 44, 30, 19, 82, 53, 67, 27, 6" id="carton37"></div>
<div data-numeros="14, 37, 43, 78, 17, 29, 60, 88, 23, 38, 54, 65, 85, 8, 9" id="carton29"></div>
<div data-numeros="27, 44, 56, 70, 6, 18, 37, 59, 83, 36, 48, 61, 76, 87, 3" id="carton9"></div>
<div data-numeros="26, 34, 47, 66, 83, 12, 22, 39, 51, 87, 3, 19, 44, 55, 70" id="carton2"></div>
<div data-numeros="1, 12, 24, 35, 49, 18, 31, 52, 60, 86, 26, 3, 42, 63, 81" id="carton24"></div>
<div data-numeros="16, 33, 55, 71, 80, 21, 40, 77, 84, 19, 37, 65, 76, 88, 8" id="carton20"></div>
<div data-numeros="15, 27, 42, 59, 73, 21, 9, 19, 46, 63, 84, 20, 36, 54, 88" id="carton32"></div>
<div data-numeros="12, 38, 52, 78, 85, 7, 29, 46, 75, 88, 19, 23, 57, 60, 90" id="carton11"></div>
<div data-numeros="18, 24, 47, 62, 50, 70, 83, 26, 31, 6, 13, 69, 56, 48, 37" id="carton34"></div>
<div data-numeros="12, 33, 44, 51, 63, 16, 39, 57, 71, 90, 22, 50, 74, 87, 1" id="carton27"></div>
<div data-numeros="13, 42, 58, 65, 89, 15, 33, 49, 72, 86, 26, 53, 69, 82, 5" id="carton10"></div>
<div data-numeros="17, 30, 53, 72, 81, 4, 10, 44, 75, 66, 22, 34, 57, 68, 90" id="carton36"></div>
<div data-numeros="23, 41, 62, 78, 85, 5, 16, 33, 59, 88, 7, 11, 35, 49, 74" id="carton6"></div>
<div data-numeros="7, 62, 70, 41, 23, 87, 66, 53, 32, 10, 44, 89, 59, 28, 13" id="carton21"></div>
<div data-numeros="14, 64, 77, 50, 1, 21, 80, 67, 35, 54, 40, 17, 73, 28, 39" id="carton7"></div>
<div data-numeros="2, 25, 36, 57, 81, 17, 20, 64, 4, 86, 32, 46, 53, 68, 75" id="carton1"></div>
<div data-numeros="11, 26, 42, 62, 83, 4, 31, 48, 56, 72, 20, 36, 59, 67, 84" id="carton26"></div>
<div data-numeros="22, 39, 57, 16, 31, 40, 23, 5, 11, 3, 85, 62, 81, 45, 64" id="carton38"></div>
<div data-numeros="85, 32, 19, 51, 6, 78, 65, 23, 37, 11, 89, 58, 71, 25, 44" id="carton18"></div>
<div data-numeros="10, 35, 54, 86, 72, 14, 43, 66, 74, 88, 25, 47, 58, 78, 37" id="carton39"></div>
<div data-numeros="2, 3, 18, 10, 24, 28, 35, 40, 46, 55, 61, 69, 77, 79, 82" id="carton25"></div>
<div data-numeros="10, 5, 3, 20, 26, 36, 41, 46, 52, 66, 65, 79, 81, 90, 80" id="carton100"></div>
<div data-numeros="3, 8, 16, 26, 29, 35, 44, 42, 54, 56, 66, 60, 70, 88, 87" id="carton101"></div>
<div data-numeros="9, 2, 19, 29, 27, 32, 38, 44, 51, 56, 68, 71, 78, 84, 86" id="carton102"></div>
<div data-numeros="5, 1, 14, 24, 21, 37, 33, 48, 49, 59, 65, 67, 77, 78, 81" id="carton103"></div>
<div data-numeros="6, 11, 14, 15, 21, 34, 43, 48, 55, 54, 63, 64, 75, 82, 88" id="carton104"></div>
<div data-numeros="12, 16, 22, 31, 30, 39, 45, 42, 57, 59, 60, 62, 77, 76, 89" id="carton105"></div>
<div data-numeros="7, 10, 13, 23, 36, 38, 47, 45, 57, 62, 69, 75, 79, 84, 89" id="carton106"></div>
<div data-numeros="5, 18, 15, 27, 34, 37, 43, 42, 52, 60, 61, 70, 72, 84, 89" id="carton107"></div>
<div data-numeros="3, 16, 17, 24, 30, 45, 40, 57, 50, 67, 63, 76, 75, 83, 87" id="carton108"></div>
<div data-numeros="7, 2, 11, 13, 21, 28, 32, 36, 46, 58, 62, 79, 78, 81, 80" id="carton109"></div>
<div data-numeros="8, 10, 19, 23, 29, 39, 31, 48, 41, 55, 51, 66, 77, 82, 90" id="carton110"></div>
<div data-numeros="3, 8, 10, 20, 31, 35, 41, 43, 58, 54, 66, 60, 77, 71, 90" id="carton111"></div>
<div data-numeros="1, 6, 12, 25, 26, 35, 44, 49, 56, 59, 69, 68, 74, 88, 73" id="carton112"></div>
<div data-numeros="4, 6, 19, 15, 27, 28, 34, 42, 56, 55, 64, 70, 88, 87, 85" id="carton113"></div>
<div data-numeros="9, 12, 18, 24, 23, 39, 36, 51, 50, 63, 68, 74, 76, 82, 86" id="carton114"></div>
<div data-numeros="3, 15, 11, 22, 25, 33, 37, 46, 58, 68, 62, 78, 79, 88, 80" id="carton115"></div>
<div data-numeros="7, 16, 13, 25, 38, 32, 47, 45, 57, 69, 62, 79, 75, 84, 89" id="carton116"></div>
<div data-numeros="2, 5, 17, 13, 28, 35, 38, 41, 48, 54, 55, 72, 73, 82, 87" id="carton117"></div>
<div data-numeros="1, 5, 14, 22, 26, 37, 33, 46, 49, 59, 65, 61, 72, 73, 83" id="carton118"></div>
<div data-numeros="2, 11, 17, 29, 21, 30, 40, 44, 48, 53, 52, 67, 78, 80, 81" id="carton119"></div>
<div data-numeros="8, 14, 18, 29, 23, 36, 44, 49, 52, 69, 67, 70, 75, 85, 89" id="carton120"></div>
<div data-numeros="3,10,19,28,31,40,45,54,55,63,67,74,75,82,90" id="carton201"></div>
<div data-numeros="4,9,12,20,26,33,38,47,56,59,65,68,71,85,88" id="carton202"></div>
<div data-numeros="5,11,18,21,30,34,37,42,43,50,61,62,73,84,89" id="carton203"></div>
<div data-numeros="2,7,13,17,22,27,36,41,46,52,60,76,77,80,81" id="carton204"></div>
<div data-numeros="8,15,16,23,29,32,35,48,51,57,64,72,78,83,87" id="carton205"></div>
<div data-numeros="1,6,14,24,25,39,44,49,53,58,66,69,70,79,86" id="carton206"></div>
<div data-numeros="7,10,13,25,36,38,45,47,57,62,69,75,79,84,89" id="carton207"></div>
<div data-numeros="1,5,14,26,28,33,37,48,49,59,65,67,77,78,81" id="carton208"></div>
<div data-numeros="2,9,11,15,21,32,41,46,50,53,58,61,74,80,83" id="carton209"></div>
<div data-numeros="3,8,16,22,29,35,42,44,54,56,60,66,70,87,88" id="carton210"></div>
<div data-numeros="4,6,17,19,20,24,31,34,43,55,64,71,73,85,90" id="carton211"></div>
<div data-numeros="12,18,23,27,30,39,40,51,52,63,68,72,76,82,86" id="carton212"></div>
<div data-numeros="1,16,23,28,36,44,49,58,59,61,68,71,80,84,89" id="carton213"></div>
<div data-numeros="2,7,13,19,24,31,39,46,48,51,56,67,70,73,87" id="carton214"></div>
<div data-numeros="3,10,18,20,29,33,38,41,45,50,65,77,79,83,86" id="carton215"></div>
<div data-numeros="4,8,14,17,27,32,37,40,43,60,66,74,78,82,85" id="carton216"></div>
<div data-numeros="5,11,15,21,25,30,35,47,52,55,62,63,72,75,81" id="carton217"></div>
<div data-numeros="6,9,12,22,26,34,42,43,64,69,76,84,87,88,90" id="carton218"></div>
<div data-numeros="4,7,13,23,25,31,37,40,47,53,58,69,74,79,87" id="carton219"></div>
<div data-numeros="1,8,17,18,22,33,35,49,50,61,67,72,73,83,85" id="carton220"></div>
<div data-numeros="2,9,16,20,27,36,38,46,51,56,66,70,71,84,86" id="carton221"></div>
<div data-numeros="5,10,19,28,29,32,41,44,52,65,68,78,80,81,82" id="carton222"></div>
<div data-numeros="3,11,14,21,24,30,45,48,54,57,62,63,77,88,90" id="carton223"></div>
<div data-numeros="6,12,15,26,34,39,42,43,45,59,60,64,75,76,89" id="carton224"></div>
<div data-numeros="8,11,15,22,25,38,39,40,56,59,68,70,79,80,83" id="carton225"></div>
<div data-numeros="5,23,26,33,40,48,55,57,62,65,75,77,78,82,84" id="carton226"></div>
<div data-numeros="1,6,16,19,22,27,34,44,49,51,54,60,69,76,85" id="carton227"></div>
<div data-numeros="2,7,10,12,21,28,31,35,36,58,63,64,74,81,86" id="carton228"></div>
<div data-numeros="3,9,13,17,20,29,32,41,43,45,61,67,71,72,90" id="carton229"></div>
<div data-numeros="4,14,18,30,37,42,46,47,50,52,53,66,73,87,88" id="carton230"></div>
<div data-numeros="6,16,19,24,30,31,42,47,57,64,66,71,76,81,90" id="carton231"></div>
<div data-numeros="1,9,20,27,32,43,45,50,51,53,60,61,74,84,86" id="carton232"></div>
<div data-numeros="3,11,15,22,25,33,37,46,58,62,68,78,79,80,88" id="carton233"></div>
<div data-numeros="4,7,10,12,21,26,34,39,40,56,59,63,65,77,83" id="carton234"></div>
<div data-numeros="2,5,13,17,28,35,38,41,48,54,55,72,73,82,87" id="carton235"></div>
<div data-numeros="8,14,18,23,29,36,44,49,52,67,69,70,75,85,89" id="carton236"></div>
<div data-numeros="1,5,14,22,26,33,37,46,49,59,61,65,72,73,83" id="carton237"></div>
<div data-numeros="7,13,16,25,32,38,45,47,57,62,69,75,79,84,89" id="carton238"></div>
<div data-numeros="9,12,18,23,24,36,39,50,51,63,68,74,76,82,86" id="carton239"></div>
<div data-numeros="2,11,17,21,29,30,40,44,48,52,53,67,78,80,81" id="carton240"></div>
<div data-numeros="3,8,10,20,31,35,41,43,54,58,60,66,71,77,90" id="carton241"></div>
<div data-numeros="4,6,15,19,27,28,34,42,55,56,64,70,85,87,88" id="carton242"></div>
<div data-numeros="5,15,18,27,34,37,42,43,52,60,61,70,72,85,89" id="carton243"></div>
<div data-numeros="1,6,12,25,26,35,44,49,56,59,68,69,73,74,88" id="carton244"></div>
<div data-numeros="3,16,17,24,30,40,45,50,57,63,67,75,76,83,87" id="carton245"></div>
<div data-numeros="2,7,11,13,21,28,32,36,46,58,62,78,79,80,81" id="carton246"></div>
<div data-numeros="4,9,14,20,22,33,38,47,53,54,64,65,71,85,86" id="carton247"></div>
<div data-numeros="8,10,19,23,29,31,39,41,48,51,55,66,77,82,90" id="carton248"></div>
<div data-numeros="" id="carton1000">1</div> </div>
<p></p>
<br/>



















<!-- Botón para abrir la sección de cartones guardados -->
<div class="center">
    <button id="toggleCartonesBtn" class="btn-secondary" type="button">Ver Cartones Guardados</button>
</div>

<!-- Sección oculta de cartones guardados -->
<div id="cartonesGuardadosContainer" class="control-box" hidden>
    <h3>Cartones Guardados</h3>
    <div id="listaCartonesGuardados" class="saved-cards-grid">
        <!-- Aquí se generarán los mini-tableros -->
    </div>
</div>



















<div class="page-spacer" aria-hidden="true"></div>
<div style="text-align: center; margin-bottom: 8px;">
    <button id="openStatsBtn" class="btn-secondary" type="button" onclick="openStatsModal()">Estadísticas</button>
</div>
<script type="text/javascript" src="https://contador.websiteout.com/js/21/8/0/0"></script>

    
<!-- Modal de Compartir (Web 2) -->
<div id="shareModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeShareModal()">&times;</span>
        <h2>Comparte este Juego</h2>
        
        <!-- QR Code -->
        <div style="display: flex; flex-direction: column; align-items: center; gap: 15px;">
            <div id="qrCodeContainer" style="background: white; padding: 10px; border-radius: 8px;"></div>
        </div>
        
        <div id="modalTokenContainer">
            <p style="margin: 0; font-weight: bold; text-align: center;">Código del Juego:</p>
            <div id="modalTokenDisplay" style="font-size: 1.5em; font-weight: bold; color: var(--btn-secondary); margin: 10px 0; text-align: center;">---</div>
            <p id="modalShareUrl" style="word-break: break-all; font-size: 0.8em;"></p>
            <button class="btn-primary" onclick="copyShareUrl()" style="width: 100%; margin-top: 10px;">Copiar Enlace</button>
        </div>
        <p style="font-size: 0.85em; color: var(--text-secondary); text-align: center; margin-top: 15px;">
            Tus amigos pueden entrar a <br><strong>boris8800.github.io/Bingo/web3.html</strong><br> e ingresar el token o código.
        </p>
    </div>
</div>

<!-- Modal de Estadísticas -->
<div id="statsModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeStatsModal()">&times;</span>
        <h2>Estadísticas de Bingo</h2>
        <p style="font-size: 0.9em; color: var(--text-secondary); margin-top: 0;">Cartones con más bingos</p>
        <div id="statsList" style="margin-top: 10px;"></div>
        <button onclick="resetBingoStats()" class="btn-secondary" style="width: 100%; margin-top: 20px; border-color: #ff4d4d; color: #ff4d4d; background: transparent;">Resetear Estadísticas</button>
    </div>
</div>

<!-- Modal de Ayuda / Instrucciones -->
<div id="helpModal" class="modal">
    <div class="modal-content" style="max-width:900px;">
        <span class="close-modal" onclick="closeHelpModal()">&times;</span>
        <h2>Ayuda - Cómo funciona Bingo Virtual</h2>
        <div style="max-height:60vh; overflow:auto; padding-right:6px;">
            <section>
                <h3>Visión general</h3>
                <p>Este es un juego de Bingo en el que un equipo (Web1 - Host / Máster) controla el sorteo de números, y los espectadores (Web3) pueden conectarse y seguirlo en tiempo real. Puedes jugar desde el PC (Host) o desde móviles/otros dispositivos (Invitados).</p>
            </section>

            <section>
                <h3>Resumen del README</h3>
                <p>Este proyecto, <strong>Bingo Virtual</strong>, es una aplicación web ligera para jugar Bingo con soporte P2P, exportación de cartones y síntesis de voz.</p>
                <ul>
                    <li>Genera números automáticamente (1–90) con control de velocidad y opciones de pausa/reinicio.</li>
                    <li>Sintetizador de voz (se intenta usar voces premium como Google Premium) y desbloqueo de audio en iOS.</li>
                    <li>Sincronización multi-dispositivo: BroadcastChannel, LocalStorage fallback y PeerJS (WebRTC) para espectadores.</li>
                    <li>Seguir cartones, alertas de Bingo, estadísticas sincronizadas y exportación a PDF.</li>
                </ul>
                <p><a href="README.md" target="_blank" rel="noopener">Ver README completo</a></p>
            </section>

            <section>
                <h3>Controles principales (Web1 - Host)</h3>
                <ul>
                    <li><strong>Comenzar / Detener:</strong> Inicia o detiene el sorteo automático de números.</li>
                    <li><strong>Reiniciar:</strong> Limpia la partida y restablece los números disponibles (1–90).</li>
                    <li><strong>Compartir:</strong> Genera el código/QR que los espectadores usarán para conectarse via WebRTC (PeerJS).</li>
                    <li><strong>Velocidad:</strong> Ajusta la velocidad del sorteo mediante el control deslizante.</li>
                </ul>
            </section>

            <section>
                <h3>Voz y audio</h3>
                <ul>
                    <li>Selecciona la voz en el control de voz. Se intentará usar la voz preferida (por ejemplo, Google Premium) cuando esté disponible.</li>
                    <li>En dispositivos iOS Safari, el audio puede estar bloqueado hasta que realices una interacción: toca la pantalla para desbloquear audio.</li>
                    <li>El host envía un timestamp para que la reproducción de voz en los invitados esté sincronizada.</li>
                </ul>
            </section>

            <section>
                <h3>Seguir mis cartones</h3>
                <p>En la sección "Seguir Cartones" puedes indicar los ID de tus cartones (separados por comas). El sistema muestra "pills" con el progreso (aciertos/total) y una vista previa del cartón.</p>
                <ul>
                    <li>Los "pills" parpadearán en naranja si te faltan 2 números y en rojo si te falta 1 número.</li>
                    <li>Si uno de tus cartones hace Bingo, el sistema reproducirá un sonido y el juego se pausará automáticamente para confirmar.</li>
                    <li>Puedes pulsar "Continuar" para reanudar el sorteo.</li>
                </ul>
            </section>

            <section>
                <h3>Sincronización (Web3)</h3>
                <p>El sistema usa PeerJS (WebRTC) para conectar espectadores con el Host. Cuando estás editando la lista de cartones (escribiendo en la caja), la sincronización se pausa temporalmente para que no se sobrescriba lo que escribes. La conexión se reanuda al pulsar "Seguir".</p>
            </section>

            <section>
                <h3>Estadísticas</h3>
                <p>El juego mantiene un contador de bingos por cartón. Las estadísticas están sincronizadas entre el host y los espectadores y pueden resetearse desde el modal de estadísticas con el botón "Resetear Estadísticas".</p>
            </section>

            <section>
                <h3>Exportar / Imprimir</h3>
                <p>Puedes generar un PDF con los cartones para imprimirlos usando la función de exportación integrada.</p>
            </section>

            <section>
                <h3>Modo espectador</h3>
                <p>Los espectadores pueden conectarse con el código que genera el Host o mediante el QR. La vista del espectador recibe el estado del juego y muestra los números en tiempo real. Si se detecta un Bingo en un cartón seguido, la vista puede notificar y pedir la pausa al Host.</p>
            </section>

            <section>
                <h3>Buenas prácticas</h3>
                <ul>
                    <li>Como Host, asegúrate de compartir el código con tiempo y confirmar que los espectadores están conectados antes de empezar.</li>
                    <li>Si hay muchos espectadores, la conectividad puede tardar unos segundos; espera a que el contador de espectadores suba.</li>
                    <li>Usa el botón de activar sonido en iOS si no escuchas anuncios por voz.</li>
                </ul>
            </section>

            <section>
                <h3>Problemas comunes</h3>
                <ul>
                    <li>Si un espectador no recibe números: comprobar código, conexión de red y que la página tenga permiso para WebRTC.</li>
                    <li>Si el audio no suena en móvil iOS: toca la pantalla o pulsa el botón de sonido para desbloquear el AudioContext.</li>
                </ul>
            </section>

            <section>
                <h3>Contacto / Repositorio</h3>
                <p>Para más información o para ver el código fuente, visita el perfil de GitHub: <a href="https://github.com/Boris8800" target="_blank" rel="noopener">Boris8800</a></p>
            </section>
        </div>
    </div>
</div>

<script>window.__IS_MASTER = false;</script>
<script src="js/script.js?v=5"></script>

<footer style="text-align: center; margin-top: 20px; padding: 10px; font-size: 0.9em; color: var(--text-secondary);">
    © Boris8800 - 2026 - v5
</footer>
</body>
</html>
